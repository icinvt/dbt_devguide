### 2. プロジェクトの構造

#### モデルファイルとYAMLファイルの配置

dbtプロジェクトでは、モデルファイル（`.sql`）とYAMLファイル（`.yml`）を適切に配置することで、プロジェクトの可読性と保守性を高めることができます。本ガイドラインでは、以下の原則に従ったファイルの配置を推奨します。

---

##### 1. **モデルファイル（`.sql`）の配置**
- モデルファイルは、プロジェクト内でその役割に応じたディレクトリに配置します。
  - **ステージングモデル**: `models/staging/` ディレクトリに配置します。データソースごとにサブディレクトリを作成し、対応するソーステーブルごとにステージングモデルを配置します。
    - 例: `models/staging/source_1/stg_table_1.sql`
  - **中間モデル**: `models/intermediate/` ディレクトリに配置します。中間モデルには`int_`をプレフィックスとして付け、ビジネスマートで使用するデータの加工や統合処理を記述します。
    - 例: `models/intermediate/int_aggregated_data.sql`
  - **マートモデル**: `models/marts/` ディレクトリに配置します。ビジネスニーズに対応する事実テーブル（`fct_`）やディメンションテーブル（`dim_`）が含まれます。
    - 例: `models/marts/fct_sales.sql`

- モデルの命名には一貫性を持たせ、モデルのタイプ（ステージング、中間、マート）を識別できるようにプレフィックスを付けます。
  - **ステージングモデル**: `stg_`
  - **中間モデル**: `int_`
  - **ファクトモデル**: `fct_`
  - **ディメンションモデル**: `dim_`

---

##### 2. **YAMLファイル（`.yml`）の配置**
- YAMLファイルは、モデルのテストやドキュメントを記述するために使用されます。
  - **ステージングモデル用**: 各データソースごとに1つのYAMLファイルを作成し、対応するステージングモデルと同じディレクトリ内に配置します。
    - 例: `models/staging/source_1/source_1.yml`
  - **中間モデル用**: 中間モデルを配置するディレクトリ内に1つのYAMLファイルを作成し、すべてのモデルのドキュメントとテストを記述します。
    - 例: `models/intermediate/intermediate.yml`
  - **マートモデル用**: マートディレクトリ内にモデルの役割ごと（例: ファクト、ディメンション）に1つのYAMLファイルを作成します。
    - 例: `models/marts/marts.yml`

- YAMLファイルには、以下の情報を記載します。
  - **モデルの説明**: 各モデルが提供するデータの内容や目的を記述します。
  - **テスト**: ユニーク制約、非NULL制約、許容値チェックなど、各モデルに必要なテストを定義します。
  - **カラムの説明**: 各カラムの役割や意味を記載します。

---

##### 3. **一貫性と保守性のためのルール**
- **モデルとYAMLファイルの対応**: モデルファイルとYAMLファイルは同じディレクトリ内に配置し、関連付けを明確にします。
- **分離と整理**: 各モデルの役割に応じたディレクトリ構造を維持し、モデルファイルとYAMLファイルが混在しないようにします。
- **スケーラビリティ**: データソースやモデルの数が増えても混乱が生じないように、ディレクトリとファイル構造を継続的に整理します。

適切なモデルファイルとYAMLファイルの配置は、プロジェクトの品質と開発速度を向上させる鍵となります。この構造を守ることで、チーム全体での効率的なコラボレーションが可能になります。